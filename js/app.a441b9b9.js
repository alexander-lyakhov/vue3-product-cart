(function(e){function t(t){for(var c,o,i=t[0],u=t[1],s=t[2],d=0,b=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&b.push(n[o][0]),n[o]=0;for(c in u)Object.prototype.hasOwnProperty.call(u,c)&&(e[c]=u[c]);l&&l(t);while(b.length)b.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],c=!0,i=1;i<r.length;i++){var u=r[i];0!==n[u]&&(c=!1)}c&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var c={},n={app:0},a=[];function o(t){if(c[t])return c[t].exports;var r=c[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=c,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(r,c,function(t){return e[t]}.bind(null,c));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue3-product-cart/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"2df9":function(e,t,r){"use strict";r("2e05")},"2e05":function(e,t,r){},"4b3e":function(e,t,r){"use strict";r("e9e4")},"4ffb":function(e){e.exports=JSON.parse("{}")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var c=r("7a23");function n(e,t,r,n,a,o){var i=Object(c["u"])("v-header"),u=Object(c["u"])("grid");return Object(c["o"])(),Object(c["e"])("div",null,[Object(c["h"])(i),Object(c["h"])(u)])}r("5a8b"),r("b20f");var a=Object(c["B"])("data-v-aefea5d4");Object(c["q"])("data-v-aefea5d4");var o={class:"stat products"},i={class:"value"},u={class:"stat total-price"},s={class:"value"},l={key:0,class:"stat cart-empty"},d={class:"languages"};Object(c["p"])();var b=a((function(e,t,r,n,a,b){return Object(c["o"])(),Object(c["e"])("header",null,[Object(c["h"])("div",o,[Object(c["g"])(Object(c["w"])(e.$t("products-in-cart"))+": ",1),Object(c["h"])("span",i,Object(c["w"])(e.totalProducts),1)]),Object(c["h"])("div",u,[Object(c["g"])(Object(c["w"])(e.$t("total-price"))+": ",1),Object(c["h"])("span",s,Object(c["w"])(e.totalPrice)+" $",1)]),e.totalProducts?Object(c["f"])("",!0):(Object(c["o"])(),Object(c["e"])("div",l,Object(c["w"])(e.$t("cart-is-empty")),1)),Object(c["h"])("div",d,[Object(c["h"])("a",{href:"#",ref:"en",onClick:t[1]||(t[1]=Object(c["A"])((function(e){return b.setLocale(e.target,"en")}),["prevent"])),class:"selected"},"en",512),Object(c["h"])("a",{href:"#",ref:"ru",onClick:t[2]||(t[2]=Object(c["A"])((function(e){return b.setLocale(e.target,"ru")}),["prevent"]))},"ru",512)])])})),p=(r("4160"),r("159b"),r("5530")),f=r("5502"),v={name:"Header",mounted:function(){this.setLocale(this.$refs[this.$i18n.locale],this.$i18n.locale)},computed:Object(p["a"])({},Object(f["b"])(["totalProducts","totalPrice"])),methods:{setLocale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";e.parentNode.children.forEach((function(t){t===e?t.classList.add("selected"):t.classList.remove("selected")})),this.$i18n.locale=t}}};r("4b3e");v.render=b,v.__scopeId="data-v-aefea5d4";var O=v,j=Object(c["B"])("data-v-711d2fd2");Object(c["q"])("data-v-711d2fd2");var m={key:1,class:"grid"},h={key:1,class:"message msg-error fade-in"};Object(c["p"])();var g=j((function(e,t,r,n,a,o){var i=Object(c["u"])("product-cart");return e.error?(Object(c["o"])(),Object(c["e"])("div",h,Object(c["w"])(e.error),1)):(Object(c["o"])(),Object(c["e"])(c["a"],{key:0},[e.isLoading?(Object(c["o"])(),Object(c["e"])("div",{key:0,class:"message msg-info transparent",ref:"msgInfo"},Object(c["w"])(e.$t("fetching-data"))+"... ",513)):(Object(c["o"])(),Object(c["e"])("div",m,[(Object(c["o"])(!0),Object(c["e"])(c["a"],null,Object(c["t"])(e.products,(function(e,t){return Object(c["o"])(),Object(c["e"])("div",{class:"grid-cell",key:t},[Object(c["h"])(i,{cart:e},null,8,["cart"])])})),128))]))],64))})),w=(r("d3b7"),r("ac1f"),r("25f0"),r("5319"),r("96cf"),r("1da1")),y=Object(c["B"])("data-v-07e9cce7");Object(c["q"])("data-v-07e9cce7");var P={class:"cart"},x={class:"title"},k={class:"image"},L=Object(c["h"])("div",{class:"img-cover"},null,-1),R={class:"price"},$={class:"price-total"};Object(c["p"])();var _=y((function(e,t,r,n,a,o){var i=Object(c["u"])("counter");return Object(c["o"])(),Object(c["e"])("div",P,[Object(c["h"])("div",x,Object(c["w"])(r.cart.title),1),Object(c["h"])("div",k,[Object(c["h"])("img",{src:r.cart.src},null,8,["src"]),L]),Object(c["h"])("div",R,Object(c["w"])(e.$t("price"))+": "+Object(c["w"])(r.cart.price)+"$ ",1),Object(c["h"])(i,{value:e.amount,max:r.cart.limit,onChange:n.change},null,8,["value","max","onChange"]),Object(c["h"])("div",$,[Object(c["h"])("span",null,Object(c["w"])(e.$t("total"))+":",1),Object(c["h"])("span",null,Object(c["w"])(n.totalPrice)+" $",1)]),Object(c["h"])("div",{class:["reset-wrapper",{isActive:n.isResetActive}]},[Object(c["h"])("button",{class:"reset",onClick:t[1]||(t[1]=Object(c["A"])((function(){return n.reset.apply(n,arguments)}),["stop"])),disabled:!n.isResetActive},Object(c["w"])(e.$t("reset")),9,["disabled"])],2)])})),A=Object(c["B"])("data-v-0882742a"),E=A((function(e,t,r,n,a,o){var i=Object(c["v"])("wheel");return Object(c["o"])(),Object(c["e"])("div",{class:["counter",{selected:r.value>0}]},[Object(c["h"])("button",{class:"decrease",onClick:t[1]||(t[1]=Object(c["A"])((function(){return n.decrease.apply(n,arguments)}),["stop"]))}),Object(c["z"])(Object(c["h"])("div",{class:["value",{maximum:r.value===r.max}]},Object(c["w"])(r.value),3),[[i,n.mouseWheelHandler]]),Object(c["h"])("button",{class:"increase",onClick:t[2]||(t[2]=Object(c["A"])((function(){return n.increase.apply(n,arguments)}),["stop"]))})],2)})),S=(r("a9e3"),{mounted:function(e,t){e.addEventListener("wheel",t.value.bind(this)),e.addEventListener("DOMMouseScroll",t.value.bind(this))}}),T={name:"counter",props:{min:{type:Number,default:0},max:{type:Number,default:0},value:{type:Number,default:0}},emits:{change:{type:Number}},setup:function(e,t){var r=t.emit,c=function(){e.value>e.min&&r("change",e.value-1)},n=function(){(e.value<e.max||!e.max)&&r("change",e.value+1)},a=function(e){e.preventDefault(),e.stopPropagation();var t=e.deltaY||e.detail||e.wheelDelta;120===Math.abs(t)?t>0?n():c():t<0?n():c()};return{decrease:c,increase:n,mouseWheelHandler:a}},directives:{wheel:S}};r("e927");T.render=E,T.__scopeId="data-v-0882742a";var C=T,M={name:"cart",components:{counter:C},props:{cart:{type:Object,default:function(){}}},setup:function(e,t){var r=e.cart,n=Object(c["r"])({amount:0}),a=Object(f["c"])();return Object(p["a"])(Object(p["a"])({},Object(c["x"])(n)),{},{totalPrice:Object(c["c"])((function(){return r.price*n.amount})),isResetActive:Object(c["c"])((function(){return n.amount>0})),change:function(e){n.amount>e?a.commit("decreaseTotal",r.price):a.commit("increaseTotal",r.price),n.amount=e},reset:function(){a.commit("decreaseAmount",{amount:n.amount,price:r.price}),n.amount=0}})}};r("2df9");M.render=_,M.__scopeId="data-v-07e9cce7";var I=M,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){return setTimeout(t,e)}))},B=function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,r,c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=c,!e.t0){e.next=4;break}return e.next=4,N(c);case 4:return t.classList.add(r),e.abrupt("return",new Promise((function(e){var c=function c(){t.removeEventListener("transitionend",c),t.removeEventListener("animationend",c),t.classList.remove(r),e()};t.addEventListener("transitionend",c),t.addEventListener("animationend",c)})));case 6:case"end":return e.stop()}}),e)})));return function(t,r,c){return e.apply(this,arguments)}}(),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return B(e,"fade-in",t)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return B(e,"fade-out",t)};var H={name:"Grid",components:{"product-cart":I},setup:function(){var e=Object(f["c"])(),t=Object(c["r"])({isLoading:!0,error:""}),r=Object(c["s"])(null);return Object(c["m"])(Object(w["a"])(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,q(r.value,250);case 2:r.value.classList.remove("transparent"),e.dispatch("fetchProducts").then(function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D(r.value,500);case 2:t.isLoading=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D(r.value,500);case 2:t.error=c.toString().replace(/\"/,"");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return c.stop()}}),c)})))),Object(p["a"])(Object(p["a"])({},Object(c["x"])(t)),{},{msgInfo:r})},computed:Object(p["a"])({},Object(f["b"])(["products"]))};r("5866");H.render=g,H.__scopeId="data-v-711d2fd2";var J=H,W={name:"App",components:{"v-header":O,grid:J}};W.render=n;var z=W,F=(r("3ca3"),r("841c"),r("ddb0"),r("2b3d"),r("4ffb"),"http://my-json-server.typicode.com/alexander-lyakhov/vue3-product-cart/products"),G=Object(f["a"])({state:{products:[],totalProducts:0,totalPrice:0},getters:{products:function(e){return e.products}},mutations:{setProducts:function(e,t){console.log("setProducts",t),e.products=t},decreaseTotal:function(e,t){e.totalProducts--,e.totalPrice-=+t},increaseTotal:function(e,t){e.totalProducts++,e.totalPrice+=+t},decreaseAmount:function(e,t){var r=t.amount,c=t.price;e.totalProducts-=r,e.totalPrice-=r*c},increaseAmount:function(e,t){var r=t.amount,c=t.price;e.totalProducts+=r,e.totalPrice+=r*c}},actions:{fetchProducts:function(e){return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,c=new URLSearchParams(location.search),"true"===c.get("forceError")&&(F=""),t.next=5,fetch(F);case 5:if(n=t.sent,n.ok){t.next=8;break}throw"Error: "+n.status;case 8:return t.t0=r,t.next=11,n.json();case 11:t.t1=t.sent,(0,t.t0)("setProducts",t.t1);case 13:case"end":return t.stop()}}),t)})))()}}}),U=r("ab42"),Y={en:{"products-in-cart":"Products in cart","total-price":"Total price","cart-is-empty":"Cart is empty",price:"Price",total:"Total",reset:"Reset","fetching-data":"Fetching data"},ru:{"products-in-cart":"Товаров в корзине","total-price":"Общая стоимость","cart-is-empty":"Корзина пуста",price:"Цена",total:"Итого",reset:"Сброс","fetching-data":"Загрузка данных"}},K=Object(U["a"])({locale:"en",fallbackLocale:"en",messages:Y});console.log("i18n",K),window.app=Object(c["d"])(z).use(G).use(K).mount("#app")},5866:function(e,t,r){"use strict";r("64b6")},"5a8b":function(e,t,r){},"64b6":function(e,t,r){},"94a8":function(e,t,r){},b20f:function(e,t,r){},e927:function(e,t,r){"use strict";r("94a8")},e9e4:function(e,t,r){}});